# Бакалавриат СПбГУ
Файл [`spbu_bach.py`](../spbu_bach.py).

## Источник
Списки поступающих находятся на странице <https://cabinet.spbu.ru/Lists/1k_EntryLists/>, где у каждого поступающего есть ссылки на таблицы с конкурсами.

## Работа скрипта по шагам
На вход принимается:
- список страниц, с которых нужно собрать данные (`None` вместо списка, если нужно собрать данные со всевозможных конкурсов);
- список методов сохранения данных (если список пустой, выдается предупреждение).

Основная задача:
- Только если нужно построить список конкурсов:
    - Строится список поступающих.
    - Вытаскиваются конкурсы для каждого поступающего (асинхронно многопоточно).
    - Списки конкурсов объединяются в единый список.
- В словарь собираются поступающие для каждого конкурса (асинхронно многопоточно): парсятся общие для конкурса свойства, далее происходит итерация по таблице.
- Словарь передается в каждый метод сохранения с именем `spbu-bach`.

## Собираемые данные
Следующие данные собираются с сайта о каждом поступающем (если есть):

Признак | Название | Тип
--- | --- | ---
Образовательная программа | `eduProg` | Строка
Направление подготовки / Специальность | `speciality` | Строка
Форма обучения (*очная* или *заочная*?) | `onlyInWalls` | Строка
Основа обучения (*бюджет* или *коммерция*) | `forMoney` | Строка
ФИО абитуриента | `abitName` | Строка
Дата рождения | `birthday` | Строка в формате `дд.мм.гггг`
Тип отбора (*общий конкурс* или *без вступительных испытаний* или *вне конкурса*?) | `contestType` | Строка
Сумма баллов (за конкурсы и за ИД) | `sum` | Дробное или `null`
Сумма баллов (только за конкурсы) | `sumExam` | Дробное или `null`
Баллы за конкурсы | `grades` | Словарь вида `{предмет: дробное_или_null}`
Баллы за индивидуальные достижения (*сумма*) | `extraBonus` | Дробное или `null`
Аттестат (*подлинник* или *копия*?) | `original` | Подлинник &mdash; `True`, копия &mdash; `False`

## Пример одной записи из JSON файла
```json
{
  "https://cabinet.spbu.ru/Lists/1k_EntryLists/list_436f18d8-e55a-4b0e-b1b0-57c29aed527b.html": [
    {
      "speciality": "54.05.02 Живопись",
      "eduProg": "СМ.5117.2018 Художник кино и телевидения",
      "onlyInWalls": "очная",
      "forMoney": "Госбюджетная",
      "abitName": "Фамилия Имя Отчество",
      "birthday": "26.09.1998",
      "contestType": "общ.",
      "sum": 451.0,
      "sumExam": 451.0,
      "grades": {
        "Литература": 69.0,
        "Русский язык": 88.0,
        "Творческий конкурс (живопись) (жив) (доп)": 100.0,
        "Творческий конкурс (рисунок) (жив) (доп)": 96.0,
        "Творческий конкурс (композиция) (жив) (доп)": 98.0
      },
      "extraBonus": 0.0,
      "original": true
    }
  ]
}
```
